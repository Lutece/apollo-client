<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">

    
      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PNFDVBB');</script>
      <!-- End Google Tag Manager -->
    

    <!-- Basic -->
    <title>Server-side rendering | Apollo Client</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <link rel="shortcut icon" type="image/png" href="../images/favicon-apollo.png" sizes="16x16 32x32 64x64">
    

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.apollographql.com/docs/react">
    <meta property="og:title" content="Server-side rendering | Apollo Client">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:site" content="@apollographql">
    <meta name="twitter:title" content="Server-side rendering | Apollo Client">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="">

    
    
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.css" rel="stylesheet" type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    
      <link rel="stylesheet" href="../style/bundle-apollo.css">
    
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">
  </head>
  <body class="">
    
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PNFDVBB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    
      

  <div class="nav sunset">
    <div class="nav-group left">
      <div class="nav-item mobile-button js-sidebar-toggle show-mobile">
        <span class="icon-menu"></span>
      </div>
      <div class="nav-item">
        
        <a class="logo-wrapper" href="https://www.apollographql.com/" title="Apollo ">
          <img src="../images/logo-apollo-space-left.svg" alt="Apollo" class="logo">
          
            <span></span>
          
        </a>
      </div>
    </div>


    
      <div class="nav-group right">
        <div id="nav-container" class="show-desktop"></div>
        <script src="https://apollographql-nav.netlify.com/index.js"></script>
        <script>ApolloNav.initNav({ theme: 'light' }, 'nav-container')</script>
      </div>
    
    </div>
  

  

<div class="sidebar charcoal">
  <div class="panel">
    
      <div id="sidebar-panel-nav"></div>
      <script>ApolloNav.initNav({ theme: 'light', id: 'mobile-nav' }, 'sidebar-panel-nav')</script>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Apollo Client</span>
      
        <span class="select version-sidebar nochrome">
          <select class="version-select">
            
              <option value="v2.5">2.5</option>
            
              <option value="v2.4">2.4</option>
            
          </select>
        </span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-area">
        <div class="input-symbol small round">
          <input type="text" placeholder="Search React Guide" id="desktop-search-input">
          <span class="icon-search"></span>
        </div>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      

        <li>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../." class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../why-apollo.html" class="sidebar-link ">
                  <span>Why Apollo Client?</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../integrations.html" class="sidebar-link ">
                  <span>View integrations</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../react-apollo-migration.html" class="sidebar-link ">
                  <span>New in React Apollo 2.1</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Essentials</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../essentials/get-started.html" class="sidebar-link ">
                  <span>Get started</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/local-state.html" class="sidebar-link ">
                  <span>Local state management</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Features</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="error-handling.html" class="sidebar-link ">
                  <span>Error handling</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="pagination.html" class="sidebar-link ">
                  <span>Pagination</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="optimistic-ui.html" class="sidebar-link ">
                  <span>Optimistic UI</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc current">
                <a href="" class="sidebar-link current">
                  <span>Server-side rendering</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="developer-tooling.html" class="sidebar-link ">
                  <span>Developer tools</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="defer-support.html" class="sidebar-link ">
                  <span>Deferred queries</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Advanced</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../advanced/boost-migration.html" class="sidebar-link ">
                  <span>Apollo Boost migration</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../advanced/subscriptions.html" class="sidebar-link ">
                  <span>Subscriptions</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../advanced/network-layer.html" class="sidebar-link ">
                  <span>Network layer (Apollo Link)</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../advanced/caching.html" class="sidebar-link ">
                  <span>Caching data</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../advanced/fragments.html" class="sidebar-link ">
                  <span>Using fragments</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Recipes</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../recipes/authentication.html" class="sidebar-link ">
                  <span>Authentication</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/testing.html" class="sidebar-link ">
                  <span>Testing React components</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/static-typing.html" class="sidebar-link ">
                  <span>Using TypeScript</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/performance.html" class="sidebar-link ">
                  <span>Improving performance</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/react-native.html" class="sidebar-link ">
                  <span>Integrating with React Native</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/babel.html" class="sidebar-link ">
                  <span>Compiling queries with Babel</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/webpack.html" class="sidebar-link ">
                  <span>Loading queries with Webpack</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/meteor.html" class="sidebar-link ">
                  <span>Integrating with Meteor</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/recompose.html" class="sidebar-link ">
                  <span>Recompose patterns</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/2.0-migration.html" class="sidebar-link ">
                  <span>Apollo Client 1.0 migration</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">API</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../api/apollo-client.html" class="sidebar-link ">
                  <span>Apollo Client</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../api/react-apollo.html" class="sidebar-link ">
                  <span>React Apollo</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      
    </ul>
  </div>
</div>

    <div class="content">

      <div class="header-content">
        <div class="header-wrapper">
          <div class="title-wrapper">
            <h1 class="title-page">
              Server-side rendering
            </h1>
            
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="document-formatting">
          <p>Apollo provides two techniques to allow your applications to load quickly, avoiding unnecessary delays to users:</p>
<ul>
<li>Store rehydration, which allows your initial set of queries to return data immediately without a server roundtrip.</li>
<li>Server side rendering, which renders the initial HTML view on the server before sending it to the client.</li>
</ul>
<p>You can use one or both of these techniques to provide a better user experience.</p>
<h2 id="store-rehydration">Store rehydration</h2>

<p>For applications that can perform some queries on the server prior to rendering the UI on the client, Apollo allows for setting the initial state of data. This is sometimes called rehydration, since the data is “dehydrated” when it is serialized and included in the initial HTML payload.</p>
<p>For example, a typical approach is to include a script tag that looks something like:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-html">&lt;script&gt;
  window.__APOLLO_STATE__ = JSON.stringify(client.extract());
&lt;&#x2F;script&gt;
</code></pre>
<p>You can then rehydrate the client using the initial state passed from the server:

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const client = new ApolloClient({
  cache: new InMemoryCache().restore(window.__APOLLO_STATE__),
  link,
});
</code></pre></p>
<p>We’ll see below how you can generate both the HTML and the Apollo store’s state using Node and <code>react-apollo</code>‘s server rendering functions. However if you are rendering HTML via some other means, you will have to generate the state manually.</p>
<p>Then, when the client runs the first set of queries, the data will be returned instantly because it is already in the store!</p>
<p>If you are using <code>fetchPolicy: network-only</code> or <code>fetchPolicy: cache-and-network</code> on some of the initial queries, you can pass the <code>ssrForceFetchDelay</code> option to skip force fetching during initialization, so that even those queries run using the cache:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const client = new ApolloClient({
  cache: new InMemoryCache().restore(window.__APOLLO_STATE__),
  link,
  ssrForceFetchDelay: 100,
});
</code></pre>
<h2 id="server-rendering">Server-side rendering</h2>

<p>You can render your entire React-based Apollo application on a Node server using rendering functions built into <code>react-apollo</code>. These functions take care of the job of fetching all queries that are required to rendering your component tree. Typically you would use these functions from within a HTTP server such as <a href="https://expressjs.com" target="_blank" rel="noopener">Express</a>.</p>
<p>No changes are required to client queries to support this, so your Apollo-based React UI should support SSR out of the box.</p>
<h3 id="server-initialization">Server initialization</h3>

<p>In order to render your application on the server, you need to handle a HTTP request (using a server like Express, and a server-capable Router like React-Router), and then render your application to a string to pass back on the response.</p>
<p>We’ll see how to take your component tree and turn it into a string in the next section, but you’ll need to be a little careful in how you construct your Apollo Client instance on the server to ensure everything works there as well:</p>
<ol>
<li><p>When <a href="../basics/setup.html">creating an Apollo Client instance</a> on the server, you’ll need to set up your network interface to connect to the API server correctly. This might look different to how you do it on the client, since you’ll probably have to use an absolute URL to the server if you were using a relative URL on the client.</p>
</li>
<li><p>Since you only want to fetch each query result once, pass the <code>ssrMode: true</code> option to the Apollo Client constructor to avoid repeated force-fetching.</p>
</li>
<li><p>You need to ensure that you create a new client or store instance for each request, rather than re-using the same client for multiple requests. Otherwise the UI will be getting stale data and you’ll have problems with <a href="../recipes/authentication.html">authentication</a>.</p>
</li>
</ol>
<p>Once you put that all together, you’ll end up with initialization code that looks like this:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">&#x2F;&#x2F; This example uses React Router v4, although it should work
&#x2F;&#x2F; equally well with other routers that support SSR

import { ApolloProvider } from &#39;react-apollo&#39;;
import { ApolloClient } from &#39;apollo-client&#39;;
import { createHttpLink } from &#39;apollo-link-http&#39;;
import Express from &#39;express&#39;;
import { StaticRouter } from &#39;react-router&#39;;
import { InMemoryCache } from &quot;apollo-cache-inmemory&quot;;

import Layout from &#39;.&#x2F;routes&#x2F;Layout&#39;;

&#x2F;&#x2F; Note you don&#39;t have to use any particular http server, but
&#x2F;&#x2F; we&#39;re using Express in this example
const app = new Express();
app.use((req, res) =&gt; {

  const client = new ApolloClient({
    ssrMode: true,
    &#x2F;&#x2F; Remember that this is the interface the SSR server will use to connect to the
    &#x2F;&#x2F; API server, so we need to ensure it isn&#39;t firewalled, etc
    link: createHttpLink({
      uri: &#39;http:&#x2F;&#x2F;localhost:3010&#39;,
      credentials: &#39;same-origin&#39;,
      headers: {
        cookie: req.header(&#39;Cookie&#39;),
      },
    }),
    cache: new InMemoryCache(),
  });

  const context = {};

  &#x2F;&#x2F; The client-side App will instead use &lt;BrowserRouter&gt;
  const App = (
    &lt;ApolloProvider client={client}&gt;
      &lt;StaticRouter location={req.url} context={context}&gt;
        &lt;Layout &#x2F;&gt;
      &lt;&#x2F;StaticRouter&gt;
    &lt;&#x2F;ApolloProvider&gt;
  );

  &#x2F;&#x2F; rendering code (see below)
});

app.listen(basePort, () =&gt; console.log( &#x2F;&#x2F; eslint-disable-line no-console
  `app Server is now running on http:&#x2F;&#x2F;localhost:${basePort}`
));
</code></pre>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">&#x2F;&#x2F; .&#x2F;routes&#x2F;Layout.js

import { Route, Switch } from &#39;react-router&#39;;
import { Link } from &#39;react-router-dom&#39;;
import React from &#39;react&#39;;

&#x2F;&#x2F; A Routes file is a good shared entry-point between client and server
import routes from &#39;.&#x2F;routes&#39;;

const Layout = () =&gt;
  &lt;div&gt;
    &lt;nav&gt;
      &lt;ul&gt;
        &lt;li&gt;
          &lt;Link to=&quot;&#x2F;&quot;&gt;Home&lt;&#x2F;Link&gt;
        &lt;&#x2F;li&gt;
        &lt;li&gt;
          &lt;Link to=&quot;&#x2F;another&quot;&gt;Another page&lt;&#x2F;Link&gt;
        &lt;&#x2F;li&gt;
      &lt;&#x2F;ul&gt;
    &lt;&#x2F;nav&gt;

    {&#x2F;* New &lt;Switch&gt; behavior introduced in React Router v4
       https:&#x2F;&#x2F;reacttraining.com&#x2F;react-router&#x2F;web&#x2F;api&#x2F;Switch *&#x2F;}
    &lt;Switch&gt;
      {routes.map(route =&gt; &lt;Route key={route.name} {...route} &#x2F;&gt;)}
    &lt;&#x2F;Switch&gt;
  &lt;&#x2F;div&gt;;

export default Layout;
</code></pre>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">&#x2F;&#x2F; .&#x2F;routes&#x2F;index.js

import MainPage from &#39;.&#x2F;MainPage&#39;;
import AnotherPage from &#39;.&#x2F;AnotherPage&#39;;

const routes = [
  {
    path: &#39;&#x2F;&#39;,
    name: &#39;home&#39;,
    exact: true,
    component: MainPage,
  },
  {
    path: &#39;&#x2F;another&#39;,
    name: &#39;another&#39;,
    component: AnotherPage,
  },
];

export default routes;
</code></pre>
<p>You can check out the <a href="https://github.com/apollographql/GitHunt-React/blob/master/src/server.js" target="_blank" rel="noopener">GitHunt app’s <code>src/server.js</code></a> for a complete working example.</p>
<p>Next we’ll see what that rendering code actually does.</p>
<h3 id="getDataFromTree">Using <code>getDataFromTree</code></h3>

<p>The <code>getDataFromTree</code> function takes your React tree, determines which queries are needed to render them, and then fetches them all. It does this recursively down the whole tree if you have nested queries. It returns a promise which resolves when the data is ready in your Apollo Client store.</p>
<p>At the point that the promise resolves, your Apollo Client store will be completely initialized, which should mean your app will now render instantly (since all queries are prefetched) and you can return the stringified results in the response:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">import { getDataFromTree } from &quot;react-apollo&quot;

const client = new ApolloClient(....);

&#x2F;&#x2F; during request (see above)
getDataFromTree(App).then(() =&gt; {
  &#x2F;&#x2F; We are ready to render for real
  const content = ReactDOM.renderToString(App);
  const initialState = client.extract();

  const html = &lt;Html content={content} state={initialState} &#x2F;&gt;;

  res.status(200);
  res.send(`&lt;!doctype html&gt;\n${ReactDOM.renderToStaticMarkup(html)}`);
  res.end();
});
</code></pre>
<p>Your markup in this case can look something like:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">function Html({ content, state }) {
  return (
    &lt;html&gt;
      &lt;body&gt;
        &lt;div id=&quot;root&quot; dangerouslySetInnerHTML={{ __html: content }} &#x2F;&gt;
        &lt;script dangerouslySetInnerHTML={{
          __html: `window.__APOLLO_STATE__=${JSON.stringify(state).replace(&#x2F;&lt;&#x2F;g, &#39;\\u003c&#39;)};`,
        }} &#x2F;&gt;
      &lt;&#x2F;body&gt;
    &lt;&#x2F;html&gt;
  );
}
</code></pre>
<h3 id="local-queries">Avoiding the network for local queries</h3>

<p>If your GraphQL endpoint is on the same server that you’re rendering from, you may want to avoid using the network when making your SSR queries. In particular, if localhost is firewalled on your production environment (eg. Heroku), making network requests for these queries will not work.</p>
<p>One solution to this problem is to use an Apollo Link to fetch data using a local graphql schema instead of making a network request. To achieve this, when creating an Apollo Client on the server, you could use <a href="https://www.apollographql.com/docs/link/links/schema.html">SchemaLink</a> instead of using <code>createHttpLink</code> that uses your schema and context to run the query immediately, without any additional network requests.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">import { ApolloClient } from &#39;apollo-client&#39;
import { SchemaLink } from &#39;apollo-link-schema&#39;;

&#x2F;&#x2F; ...

const client = new ApolloClient({
  ssrMode: true,
  &#x2F;&#x2F; Instead of &quot;createHttpLink&quot; use SchemaLink here
  link: new SchemaLink({ schema }),
  cache: new InMemoryCache(),
});
</code></pre>
<h3 id="skip-for-ssr">Skipping queries for SSR</h3>

<p>If you want to intentionally skip a query during SSR, you can pass <code>ssr: false</code> in the query options. Typically, this will mean the component will get rendered in its loading state on the server. For example:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const withClientOnlyUser = () =&gt; (
  &lt;Query query={GET_USER_WITH_ID} ssr={false}&gt;
    {({ data }) =&gt; &lt;span&gt;I won&#39;t be run on the server&lt;&#x2F;span&gt;}
  &lt;&#x2F;Query&gt;
);
</code></pre>
<h3 id="renderToStringWithData">Using <code>renderToStringWithData</code></h3>

<p>The <code>renderToStringWithData</code> function simplifies the above and simply returns the content string  that you need to render. So it reduces the number of steps slightly:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">&#x2F;&#x2F; server application code (integrated usage)
import { renderToStringWithData } from &quot;react-apollo&quot;

const client = new ApolloClient(....);

&#x2F;&#x2F; during request
renderToStringWithData(App).then((content) =&gt; {
  const initialState = client.extract();
  const html = &lt;Html content={content} state={initialState} &#x2F;&gt;;

  res.status(200);
  res.send(`&lt;!doctype html&gt;\n${ReactDOM.renderToStaticMarkup(html)}`);
  res.end();
});
</code></pre>

        </div>
      </div>

      <div class="pagination">
        <div class="content-wrapper">
          
          
         
              <a class="link primary prev" href="optimistic-ui.html">
                <span class="icon-arrow-left-alt"></span>
                <span class="subtitle-pagination">Previous</span>
                Optimistic UI
              </a>
         
          
          
           
              <a class="link primary next" href="developer-tooling.html">
                <span class="subtitle-pagination">Next</span>
                Developer tools
                  <span class="icon-arrow-right-alt"></span>
              </a>
           
          
        </div>
      </div>

      <div class="github">
        <a class="link tertiary " href="https://github.com/apollographql/apollo-client/tree/master/docs/source/features/server-side-rendering.md" target="_blank">
          <span class="icon-github"></span>Edit on GitHub</a>
      </div>

      
    </div>

    
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/prism.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/combine/npm/prismjs@1.15.0/components/prism-bash.min.js,npm/prismjs@1.15.0/components/prism-graphql.min.js,npm/prismjs@1.15.0/components/prism-json.min.js,npm/prismjs@1.15.0/components/prism-jsx.min.js,npm/prismjs@1.15.0/components/prism-less.min.js,npm/prismjs@1.15.0/components/prism-swift.min.js,npm/prismjs@1.15.0/components/prism-typescript.min.js,npm/prismjs@1.15.0/components/prism-yaml.min.js"></script>

    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/smooth-scroll@12.1.5/dist/js/smooth-scroll.min.js"></script>

    <script>
      // Used by the main.js script below.
      docsConfigRoot = '/docs/react/';
    </script>
    <script src="../script/main.js"></script>

    
      <script type="text/javascript" src="//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();
    </script>

    

    
      <script>
        
        var analytics;

        <!-- Segment.io -->
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
        analytics.load("wgrIo8Bul0Ujl8USETG3DB6hONdy4kTg");
        analytics.page();
        }}();
      </script>
    

    // search box
    
      <script>
        ['desktop'].forEach(function(type) {
          var search = docsearch({
            apiKey: '768e823959d35bbd51e4b2439be13fb7',
            
            
            indexName: 'apollodata',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      </script>
    

    
      <script>
        var REDIRECTS = {
  "/docs/react/essentials/get-started.html#api": "docs/react/api/react-apollo.html",
  "/docs/react/essentials/queries.html#api": "docs/react/api/react-apollo.html#graphql-query-options",
  "/docs/react/basics/mutations.html#api": "docs/react/api/react-apollo.html#graphql-mutation-options",
  "/docs/react/recipes/simple-example.html": "docs/react/essentials/get-started.html",
  "/docs/react/api/apollo-client.html#FetchPolicy": "docs/react/api/react-apollo.html#graphql-config-options-fetchPolicy",
  "/docs/react/api/apollo-client.html#ErrorPolicy": "docs/react/api/react-apollo.html#graphql-config-options-errorPolicy",
  "/docs/react/features/performance.html": "/docs/react/recipes/performance.html"
};

        function redirect() {
          // Support redirects of the form /path#hash
          var locationKey = location.pathname + location.hash;
          if (REDIRECTS[locationKey]) {
            location.replace(location.origin + '/' + REDIRECTS[locationKey]);
          }

          // Support redirects of the form #hash (works for any path)
          var hashKey = location.hash;
          if (REDIRECTS[hashKey]) {
            location.replace(location.origin + '/' + REDIRECTS[hashKey]);
          }
        }

        // Redirect now
        redirect();

        // Redirect on hash change
        window.onhashchange = redirect;
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
      window.addEventListener('load', function () {
        window.cookieconsent.initialise({
          palette: {
            popup: {
              background: '#555',
            },
            button: {
              text: '#333',
              background: '#CCC',
            },
          },
        })
      });
    </script>
  </body>
</html>
