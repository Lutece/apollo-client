<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">

    
      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PNFDVBB');</script>
      <!-- End Google Tag Manager -->
    

    <!-- Basic -->
    <title>Subscriptions | Apollo Client</title>
    <meta name="description" content="Learn how to achieve realtime data with GraphQL subscriptions">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <link rel="shortcut icon" type="image/png" href="../images/favicon-apollo.png" sizes="16x16 32x32 64x64">
    

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.apollographql.com/docs/react">
    <meta property="og:title" content="Subscriptions | Apollo Client">
    <meta property="og:description" content="Learn how to achieve realtime data with GraphQL subscriptions">
    <meta property="og:image" content="">
    <meta name="twitter:site" content="@apollographql">
    <meta name="twitter:title" content="Subscriptions | Apollo Client">
    <meta name="twitter:description" content="Learn how to achieve realtime data with GraphQL subscriptions">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="">

    
    
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.css" rel="stylesheet" type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    
      <link rel="stylesheet" href="../style/bundle-apollo.css">
    
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">
  </head>
  <body class="">
    
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PNFDVBB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    
      

  <div class="nav sunset">
    <div class="nav-group left">
      <div class="nav-item mobile-button js-sidebar-toggle show-mobile">
        <span class="icon-menu"></span>
      </div>
      <div class="nav-item">
        
        <a class="logo-wrapper" href="https://www.apollographql.com/" title="Apollo ">
          <img src="../images/logo-apollo-space-left.svg" alt="Apollo" class="logo">
          
            <span></span>
          
        </a>
      </div>
    </div>


    
      <div class="nav-group right">
        <div id="nav-container" class="show-desktop"></div>
        <script src="https://apollographql-nav.netlify.com/index.js"></script>
        <script>ApolloNav.initNav({ theme: 'light' }, 'nav-container')</script>
      </div>
    
    </div>
  

  

<div class="sidebar charcoal">
  <div class="panel">
    
      <div id="sidebar-panel-nav"></div>
      <script>ApolloNav.initNav({ theme: 'light', id: 'mobile-nav' }, 'sidebar-panel-nav')</script>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Apollo Client</span>
      
        <span class="select version-sidebar nochrome">
          <select class="version-select">
            
              <option value="v2.5">2.5</option>
            
              <option value="v2.4">2.4</option>
            
          </select>
        </span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-area">
        <div class="input-symbol small round">
          <input type="text" placeholder="Search React Guide" id="desktop-search-input">
          <span class="icon-search"></span>
        </div>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      

        <li>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../." class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../why-apollo.html" class="sidebar-link ">
                  <span>Why Apollo Client?</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../integrations.html" class="sidebar-link ">
                  <span>View integrations</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../react-apollo-migration.html" class="sidebar-link ">
                  <span>New in React Apollo 2.1</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Essentials</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../essentials/get-started.html" class="sidebar-link ">
                  <span>Get started</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/local-state.html" class="sidebar-link ">
                  <span>Local state management</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Features</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../features/error-handling.html" class="sidebar-link ">
                  <span>Error handling</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/pagination.html" class="sidebar-link ">
                  <span>Pagination</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/optimistic-ui.html" class="sidebar-link ">
                  <span>Optimistic UI</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/server-side-rendering.html" class="sidebar-link ">
                  <span>Server-side rendering</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/developer-tooling.html" class="sidebar-link ">
                  <span>Developer tools</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/defer-support.html" class="sidebar-link ">
                  <span>Deferred queries</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Advanced</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="boost-migration.html" class="sidebar-link ">
                  <span>Apollo Boost migration</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc current">
                <a href="" class="sidebar-link current">
                  <span>Subscriptions</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="network-layer.html" class="sidebar-link ">
                  <span>Network layer (Apollo Link)</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="caching.html" class="sidebar-link ">
                  <span>Caching data</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Using fragments</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Recipes</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../recipes/authentication.html" class="sidebar-link ">
                  <span>Authentication</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/testing.html" class="sidebar-link ">
                  <span>Testing React components</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/static-typing.html" class="sidebar-link ">
                  <span>Using TypeScript</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/performance.html" class="sidebar-link ">
                  <span>Improving performance</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/react-native.html" class="sidebar-link ">
                  <span>Integrating with React Native</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/babel.html" class="sidebar-link ">
                  <span>Compiling queries with Babel</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/webpack.html" class="sidebar-link ">
                  <span>Loading queries with Webpack</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/meteor.html" class="sidebar-link ">
                  <span>Integrating with Meteor</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/recompose.html" class="sidebar-link ">
                  <span>Recompose patterns</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../recipes/2.0-migration.html" class="sidebar-link ">
                  <span>Apollo Client 1.0 migration</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">API</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../api/apollo-client.html" class="sidebar-link ">
                  <span>Apollo Client</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../api/react-apollo.html" class="sidebar-link ">
                  <span>React Apollo</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      
    </ul>
  </div>
</div>

    <div class="content">

      <div class="header-content">
        <div class="header-wrapper">
          <div class="title-wrapper">
            <h1 class="title-page">
              Subscriptions
            </h1>
            
              <div class="subtitle-page">
                Learn how to achieve realtime data with GraphQL subscriptions
              </div>
              
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="document-formatting">
          <p>In addition to fetching data using queries and modifying data using mutations, the GraphQL spec supports a third operation type, called <code>subscription</code>.</p>
<p>GraphQL subscriptions are a way to push data from the server to the clients that choose to listen to real time messages from the server. Subscriptions are similar to queries in that they specify a set of fields to be delivered to the client, but instead of immediately returning a single answer, a result is sent every time a particular event happens on the server.</p>
<p>A common use case for subscriptions is notifying the client side about particular events, for example the creation of a new object, updated fields and so on.</p>
<blockquote>
<p>This is an advanced feature that Apollo Boost does not support. Learn how to set Apollo Client up manually in our <a href="./boost-migration.html">Apollo Boost migration guide</a>.</p>
</blockquote>
<h2 id="overview">Overview</h2>

<p>GraphQL subscriptions have to be defined in the schema, just like queries and mutations:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">type Subscription {
  commentAdded(repoFullName: String!): Comment
}
</code></pre>
<p>On the client, subscription queries look just like any other kind of operation:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">subscription onCommentAdded($repoFullName: String!){
  commentAdded(repoFullName: $repoFullName){
    id
    content
  }
}
</code></pre>
<p>The response sent to the client looks as follows:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-json">{
  &quot;data&quot;: {
    &quot;commentAdded&quot;: {
      &quot;id&quot;: &quot;123&quot;,
      &quot;content&quot;: &quot;Hello!&quot;
    }
  }
}
</code></pre>
<p>In the above example, the server is written to send a new result every time a comment is added on GitHunt for a specific repository. Note that the code above only defines the GraphQL subscription in the schema. Read <a href="#subscriptions-client">setting up subscriptions on the client</a> and <a href="https://www.apollographql.com/docs/graphql-subscriptions/index.html">setting up GraphQL subscriptions for the server</a> to learn how to add subscriptions to your app.</p>
<h3 id="when-to-use">When to use subscriptions</h3>

<p>In most cases, intermittent polling or manual refetching are actually the best way to keep your client up to date. So when is a subscription the best option? Subscriptions are especially useful if:</p>
<ol>
<li>The initial state is large, but the incremental change sets are small. The starting state can be fetched with a query and subsequently updated through a subscription.</li>
<li>You care about low-latency updates in the case of specific events, for example in the case of a chat application where users expect to receive new messages in a matter of seconds.</li>
</ol>
<p>A future version of Apollo or GraphQL might include support for live queries, which would be a low-latency way to replace polling, but at this point general live queries in GraphQL are not yet possible outside of some relatively experimental setups.</p>
<h2 id="subscriptions-client">Client setup</h2>

<p>The most popular transport for GraphQL subscriptions today is <a href="https://github.com/apollographql/subscriptions-transport-ws" target="_blank" rel="noopener"><code>subscriptions-transport-ws</code></a>. This package is maintained by the Apollo community, but can be used with any client or server GraphQL implementation. In this article, we’ll explain how to set it up on the client, but you’ll also need a server implementation. You can <a href="/docs/graphql-subscriptions/setup.html">read about how to use subscriptions with a JavaScript server</a>, or enjoy subscriptions set up out of the box if you are using a GraphQL backend as a service like <a href="https://www.graph.cool/docs/tutorials/worldchat-subscriptions-example-ui0eizishe/" target="_blank" rel="noopener">Graphcool</a> or <a href="https://scaphold.io/blog/2016/11/09/build-realtime-apps-with-subs.html" target="_blank" rel="noopener">Scaphold</a>.</p>
<p>Let’s look at how to add support for this transport to Apollo Client.</p>
<p>First, install the WebSocket Apollo Link (<code>apollo-link-ws</code>) from npm:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-shell">npm install --save apollo-link-ws subscriptions-transport-ws
</code></pre>
<p>Then, initialize a GraphQL subscriptions transport link:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">import { WebSocketLink } from &#39;apollo-link-ws&#39;;

const wsLink = new WebSocketLink({
  uri: `ws:&#x2F;&#x2F;localhost:5000&#x2F;`,
  options: {
    reconnect: true
  }
});
</code></pre>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">import { split } from &#39;apollo-link&#39;;
import { HttpLink } from &#39;apollo-link-http&#39;;
import { WebSocketLink } from &#39;apollo-link-ws&#39;;
import { getMainDefinition } from &#39;apollo-utilities&#39;;

&#x2F;&#x2F; Create an http link:
const httpLink = new HttpLink({
  uri: &#39;http:&#x2F;&#x2F;localhost:3000&#x2F;graphql&#39;
});

&#x2F;&#x2F; Create a WebSocket link:
const wsLink = new WebSocketLink({
  uri: `ws:&#x2F;&#x2F;localhost:5000&#x2F;`,
  options: {
    reconnect: true
  }
});

&#x2F;&#x2F; using the ability to split links, you can send data to each link
&#x2F;&#x2F; depending on what kind of operation is being sent
const link = split(
  &#x2F;&#x2F; split based on operation type
  ({ query }) =&gt; {
    const { kind, operation } = getMainDefinition(query);
    return kind === &#39;OperationDefinition&#39; &amp;&amp; operation === &#39;subscription&#39;;
  },
  wsLink,
  httpLink,
);
</code></pre>
<p>Now, queries and mutations will go over HTTP as normal, but subscriptions will be done over the websocket transport.</p>
<h2 id="subscription-component">Subscription Component</h2>
The easiest way to bring live data to your UI is using the Subscription component from React Apollo. This lets you render the stream of data from your service directly within your render function of your component! One thing to note, subscriptions are just listeners, they don’t request any data when first connected, but only open up a connection to get new data. Binding live data to your UI is as easy as this:


<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const COMMENTS_SUBSCRIPTION = gql`
  subscription onCommentAdded($repoFullName: String!) {
    commentAdded(repoFullName: $repoFullName) {
      id
      content
    }
  }
`;

const DontReadTheComments = ({ repoFullName }) =&gt; (
  &lt;Subscription
    subscription={COMMENTS_SUBSCRIPTION}
    variables={{ repoFullName }}
  &gt;
    {({ data: { commentAdded }, loading }) =&gt; (
      &lt;h4&gt;New comment: {!loading &amp;&amp; commentAdded.content}&lt;&#x2F;h4&gt;
    )}
  &lt;&#x2F;Subscription&gt;
);
</code></pre>



<h2 id="api">Subscription Component API overview</h2>

<p>If you’re looking for an overview of all the props <code>Subscription</code> accepts and its render prop function, look no further!</p>
<h3 id="props">Props</h3>

<p>The Subscription component accepts the following props. Only <code>subscription</code> and <code>children</code> are <strong>required</strong>.</p>
<dl>
  <dt><code>subscription</code>: DocumentNode</dt>
  <dd>A GraphQL subscription document parsed into an AST by <code>graphql-tag</code>. <strong>Required</strong></dd>
  <dt><code>children</code>: (result: SubscriptionResult) =&gt; React.ReactNode</dt>
  <dd>A function returning the UI you want to render based on your subscription result.</dd>
  <dt><code>variables</code>: { [key: string]: any }</dt>
  <dd>An object containing all of the variables your subscription needs to execute</dd>
  <dt><code>shouldResubscribe</code>: boolean | (currentProps: Object, nextProps: Object) =&gt; boolean</dt>
  <dd>Determines if your subscription should be unsubscribed and subscribed again. By default, the component will only resubscribe if <code>variables</code> or <code>subscription</code> props change.</dd>
  <dt><code>onSubscriptionData</code>: (options: OnSubscriptionDataOptions<tdata>) =&gt; any</tdata></dt>
  <dd>Allows the registration of a callback function, that will be triggered each time the <code>Subscription</code> component receives data. The callback <code>options</code> object param consists of the current Apollo Client instance in <code>client</code>, and the received subscription data in <code>subscriptionData</code>.</dd>
  <dt><code>fetchPolicy</code>: FetchPolicy</dt>
  <dd>How you want your component to interact with the Apollo cache. Defaults to “cache-first”.</dd>
</dl>

<h3 id="render-prop">Render prop function</h3>

<p>The render prop function that you pass to the <code>children</code> prop of <code>Subscription</code> is called with an object that has the following properties</p>
<dl>
  <dt><code>data</code>: TData</dt>
  <dd>An object containing the result of your GraphQL subscription. Defaults to an empty object.</dd>
  <dt><code>loading</code>: boolean</dt>
  <dd>A boolean that indicates whether any initial data has been returned</dd>
  <dt><code>error</code>: ApolloError</dt>
  <dd>A runtime error with <code>graphQLErrors</code> and <code>networkError</code> properties</dd>
</dl>

<h2 id="subscribe-to-more">subscribeToMore</h2>

<p>With GraphQL subscriptions your client will be alerted on push from the server and you should choose the pattern that fits your application the most:</p>
<ul>
<li>Use it as a notification and run any logic you want when it fires, for example alerting the user or refetching data</li>
<li>Use the data sent along with the notification and merge it directly into the store (existing queries are automatically notified)</li>
</ul>
<p>With <code>subscribeToMore</code>, you can easily do the latter.</p>
<p><code>subscribeToMore</code> is a function available on every query result in <code>react-apollo</code>. It works just like <a href="./caching.html#fetchMore"><code>fetchMore</code></a>, except that the update function gets called every time the subscription returns, instead of only once.</p>
<p>Here is a regular query:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const COMMENT_QUERY = gql`
  query Comment($repoName: String!) {
    entry(repoFullName: $repoName) {
      comments {
        id
        content
      }
    }
  }
`;

const CommentsPageWithData = ({ params }) =&gt; (
  &lt;Query
    query={COMMENT_QUERY}
    variables={{ repoName: `${params.org}&#x2F;${params.repoName}` }}
  &gt;
    {result =&gt; &lt;CommentsPage {...result} &#x2F;&gt;}
  &lt;&#x2F;Query&gt;
);
</code></pre>
<p>Now, let’s add the subscription.</p>
<p>Add a function called <code>subscribeToNewComments</code> that will subscribe using <code>subscribeToMore</code> and update the query’s store with the new data using <code>updateQuery</code>.</p>
<p>Note that the <code>updateQuery</code> callback must return an object of the same shape as the initial query data, otherwise the new data won’t be merged. Here the new comment is pushed in the <code>comments</code> list of the <code>entry</code>:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const COMMENT_QUERY = gql`
  query Comment($repoName: String!) {
    entry(repoFullName: $repoName) {
      comments {
        id
        content
      }
    }
  }
`;

const COMMENTS_SUBSCRIPTION = gql`
  subscription onCommentAdded($repoName: String!) {
    commentAdded(repoName: $repoName) {
      id
      content
    }
  }
`;

const CommentsPageWithData = ({ params }) =&gt; (
  &lt;Query
    query={COMMENT_QUERY}
    variables={{ repoName: `${params.org}&#x2F;${params.repoName}` }}
  &gt;
    {({ subscribeToMore, ...result }) =&gt; (
      &lt;CommentsPage
        {...result}
        subscribeToNewComments={() =&gt;
          subscribeToMore({
            document: COMMENTS_SUBSCRIPTION,
            variables: { repoName: params.repoName },
            updateQuery: (prev, { subscriptionData }) =&gt; {
              if (!subscriptionData.data) return prev;
              const newFeedItem = subscriptionData.data.commentAdded;

              return Object.assign({}, prev, {
                entry: {
                  comments: [newFeedItem, ...prev.entry.comments]
                }
              });
            }
          })
        }
      &#x2F;&gt;
    )}
  &lt;&#x2F;Query&gt;
);
</code></pre>
<p>and start the actual subscription by calling the <code>subscribeToNewComments</code> function with the subscription variables:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">export class CommentsPage extends Component {
  componentDidMount() {
    this.props.subscribeToNewComments();
  }
}
</code></pre>
<h2 id="authentication">Authentication over WebSocket</h2>

<p>In many cases it is necessary to authenticate clients before allowing them to receive subscription results. To do this, the <code>SubscriptionClient</code> constructor accepts a <code>connectionParams</code> field, which passes a custom object that the server can use to validate the connection before setting up any subscriptions.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">import { WebSocketLink } from &#39;apollo-link-ws&#39;;

const wsLink = new WebSocketLink({
  uri: `ws:&#x2F;&#x2F;localhost:5000&#x2F;`,
  options: {
    reconnect: true,
    connectionParams: {
        authToken: user.authToken,
    },
});
</code></pre>
<blockquote>
<p>You can use <code>connectionParams</code> for anything else you might need, not only authentication, and check its payload on the server side with <a href="/docs/graphql-subscriptions/authentication.html">SubscriptionsServer</a>.</p>
</blockquote>

        </div>
      </div>

      <div class="pagination">
        <div class="content-wrapper">
          
          
         
              <a class="link primary prev" href="boost-migration.html">
                <span class="icon-arrow-left-alt"></span>
                <span class="subtitle-pagination">Previous</span>
                Apollo Boost migration
              </a>
         
          
          
           
              <a class="link primary next" href="network-layer.html">
                <span class="subtitle-pagination">Next</span>
                Network layer (Apollo Link)
                  <span class="icon-arrow-right-alt"></span>
              </a>
           
          
        </div>
      </div>

      <div class="github">
        <a class="link tertiary " href="https://github.com/apollographql/apollo-client/tree/master/docs/source/advanced/subscriptions.md" target="_blank">
          <span class="icon-github"></span>Edit on GitHub</a>
      </div>

      
    </div>

    
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/prism.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/combine/npm/prismjs@1.15.0/components/prism-bash.min.js,npm/prismjs@1.15.0/components/prism-graphql.min.js,npm/prismjs@1.15.0/components/prism-json.min.js,npm/prismjs@1.15.0/components/prism-jsx.min.js,npm/prismjs@1.15.0/components/prism-less.min.js,npm/prismjs@1.15.0/components/prism-swift.min.js,npm/prismjs@1.15.0/components/prism-typescript.min.js,npm/prismjs@1.15.0/components/prism-yaml.min.js"></script>

    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/smooth-scroll@12.1.5/dist/js/smooth-scroll.min.js"></script>

    <script>
      // Used by the main.js script below.
      docsConfigRoot = '/docs/react/';
    </script>
    <script src="../script/main.js"></script>

    
      <script type="text/javascript" src="//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();
    </script>

    

    
      <script>
        
        var analytics;

        <!-- Segment.io -->
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
        analytics.load("wgrIo8Bul0Ujl8USETG3DB6hONdy4kTg");
        analytics.page();
        }}();
      </script>
    

    // search box
    
      <script>
        ['desktop'].forEach(function(type) {
          var search = docsearch({
            apiKey: '768e823959d35bbd51e4b2439be13fb7',
            
            
            indexName: 'apollodata',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      </script>
    

    
      <script>
        var REDIRECTS = {
  "/docs/react/essentials/get-started.html#api": "docs/react/api/react-apollo.html",
  "/docs/react/essentials/queries.html#api": "docs/react/api/react-apollo.html#graphql-query-options",
  "/docs/react/basics/mutations.html#api": "docs/react/api/react-apollo.html#graphql-mutation-options",
  "/docs/react/recipes/simple-example.html": "docs/react/essentials/get-started.html",
  "/docs/react/api/apollo-client.html#FetchPolicy": "docs/react/api/react-apollo.html#graphql-config-options-fetchPolicy",
  "/docs/react/api/apollo-client.html#ErrorPolicy": "docs/react/api/react-apollo.html#graphql-config-options-errorPolicy",
  "/docs/react/features/performance.html": "/docs/react/recipes/performance.html"
};

        function redirect() {
          // Support redirects of the form /path#hash
          var locationKey = location.pathname + location.hash;
          if (REDIRECTS[locationKey]) {
            location.replace(location.origin + '/' + REDIRECTS[locationKey]);
          }

          // Support redirects of the form #hash (works for any path)
          var hashKey = location.hash;
          if (REDIRECTS[hashKey]) {
            location.replace(location.origin + '/' + REDIRECTS[hashKey]);
          }
        }

        // Redirect now
        redirect();

        // Redirect on hash change
        window.onhashchange = redirect;
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
      window.addEventListener('load', function () {
        window.cookieconsent.initialise({
          palette: {
            popup: {
              background: '#555',
            },
            button: {
              text: '#333',
              background: '#CCC',
            },
          },
        })
      });
    </script>
  </body>
</html>
