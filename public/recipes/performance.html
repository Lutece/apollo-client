<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">

    
      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PNFDVBB');</script>
      <!-- End Google Tag Manager -->
    

    <!-- Basic -->
    <title>Improving performance | Apollo Client</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <link rel="shortcut icon" type="image/png" href="../images/favicon-apollo.png" sizes="16x16 32x32 64x64">
    

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.apollographql.com/docs/react">
    <meta property="og:title" content="Improving performance | Apollo Client">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:site" content="@apollographql">
    <meta name="twitter:title" content="Improving performance | Apollo Client">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="">

    
    
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.css" rel="stylesheet" type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    
      <link rel="stylesheet" href="../style/bundle-apollo.css">
    
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">
  </head>
  <body class="">
    
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PNFDVBB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    
      

  <div class="nav sunset">
    <div class="nav-group left">
      <div class="nav-item mobile-button js-sidebar-toggle show-mobile">
        <span class="icon-menu"></span>
      </div>
      <div class="nav-item">
        
        <a class="logo-wrapper" href="https://www.apollographql.com/" title="Apollo ">
          <img src="../images/logo-apollo-space-left.svg" alt="Apollo" class="logo">
          
            <span></span>
          
        </a>
      </div>
    </div>


    
      <div class="nav-group right">
        <div id="nav-container" class="show-desktop"></div>
        <script src="https://apollographql-nav.netlify.com/index.js"></script>
        <script>ApolloNav.initNav({ theme: 'light' }, 'nav-container')</script>
      </div>
    
    </div>
  

  

<div class="sidebar charcoal">
  <div class="panel">
    
      <div id="sidebar-panel-nav"></div>
      <script>ApolloNav.initNav({ theme: 'light', id: 'mobile-nav' }, 'sidebar-panel-nav')</script>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Apollo Client</span>
      
        <span class="select version-sidebar nochrome">
          <select class="version-select">
            
              <option value="v2.5">2.5</option>
            
              <option value="v2.4">2.4</option>
            
          </select>
        </span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-area">
        <div class="input-symbol small round">
          <input type="text" placeholder="Search React Guide" id="desktop-search-input">
          <span class="icon-search"></span>
        </div>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      

        <li>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../." class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../why-apollo.html" class="sidebar-link ">
                  <span>Why Apollo Client?</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../integrations.html" class="sidebar-link ">
                  <span>View integrations</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../react-apollo-migration.html" class="sidebar-link ">
                  <span>New in React Apollo 2.1</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Essentials</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../essentials/get-started.html" class="sidebar-link ">
                  <span>Get started</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/local-state.html" class="sidebar-link ">
                  <span>Local state management</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Features</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../features/error-handling.html" class="sidebar-link ">
                  <span>Error handling</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/pagination.html" class="sidebar-link ">
                  <span>Pagination</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/optimistic-ui.html" class="sidebar-link ">
                  <span>Optimistic UI</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/server-side-rendering.html" class="sidebar-link ">
                  <span>Server-side rendering</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/developer-tooling.html" class="sidebar-link ">
                  <span>Developer tools</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../features/defer-support.html" class="sidebar-link ">
                  <span>Deferred queries</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Advanced</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../advanced/boost-migration.html" class="sidebar-link ">
                  <span>Apollo Boost migration</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../advanced/subscriptions.html" class="sidebar-link ">
                  <span>Subscriptions</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../advanced/network-layer.html" class="sidebar-link ">
                  <span>Network layer (Apollo Link)</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../advanced/caching.html" class="sidebar-link ">
                  <span>Caching data</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../advanced/fragments.html" class="sidebar-link ">
                  <span>Using fragments</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Recipes</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="authentication.html" class="sidebar-link ">
                  <span>Authentication</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="testing.html" class="sidebar-link ">
                  <span>Testing React components</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="static-typing.html" class="sidebar-link ">
                  <span>Using TypeScript</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc current">
                <a href="" class="sidebar-link current">
                  <span>Improving performance</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="react-native.html" class="sidebar-link ">
                  <span>Integrating with React Native</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="babel.html" class="sidebar-link ">
                  <span>Compiling queries with Babel</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="webpack.html" class="sidebar-link ">
                  <span>Loading queries with Webpack</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="meteor.html" class="sidebar-link ">
                  <span>Integrating with Meteor</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="recompose.html" class="sidebar-link ">
                  <span>Recompose patterns</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="2.0-migration.html" class="sidebar-link ">
                  <span>Apollo Client 1.0 migration</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">API</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../api/apollo-client.html" class="sidebar-link ">
                  <span>Apollo Client</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../api/react-apollo.html" class="sidebar-link ">
                  <span>React Apollo</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      
    </ul>
  </div>
</div>

    <div class="content">

      <div class="header-content">
        <div class="header-wrapper">
          <div class="title-wrapper">
            <h1 class="title-page">
              Improving performance
            </h1>
            
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="document-formatting">
          <h2 id="cache-redirects">Redirecting to cached data</h2>

<p>In some cases, a query requests data that already exists in the client store under a different key. A very common example of this is when your UI has a list view and a detail view that both use the same data. The list view might run the following query:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-clike">query ListView {
  books {
    id
    title
    abstract
  }
}
</code></pre>
<p>When a specific book is selected, the detail view displays an individual item using this query:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-clike">query DetailView {
  book(id: $id) {
    id
    title
    abstract
  }
}
</code></pre>
<blockquote>
<p>Note: The data returned by the list query has to include all the data the specific query needs. If the specific book query fetches a field that the list query doesn’t return Apollo Client cannot return the data from the cache.</p>
</blockquote>
<p>We know that the data is most likely already in the client cache, but because it’s requested with a different query, Apollo Client doesn’t know that. In order to tell Apollo Client where to look for the data, we can define custom resolvers:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">import { toIdValue } from &#39;apollo-utilities&#39;;
import { InMemoryCache } from &#39;apollo-cache-inmemory&#39;;

const cache = new InMemoryCache({
  cacheRedirects: {
    Query: {
      book: (_, args) =&gt; toIdValue(cache.config.dataIdFromObject({ __typename: &#39;Book&#39;, id: args.id })),
    },
  },
});
</code></pre>
<blockquote>
<p>Note: This’ll also work with custom <code>dataIdFromObject</code> methods as long as you use the same one.</p>
</blockquote>
<p>Apollo Client will use the return value of the custom resolver to look up the item in its cache. <code>toIdValue</code> must be used to indicate that the value returned should be interpreted as an id, and not as a scalar value or an object. “Query” key in this example is your root query type name.</p>
<p>To figure out what you should put in the <code>__typename</code> property run one of the queries in GraphiQL and get the <code>__typename</code> field:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-clike">query ListView {
  books {
    __typename
  }
}

# or

query DetailView {
  book(id: $id) {
    __typename
  }
}
</code></pre>
<p>The value that’s returned (the name of your type) is what you need to put into the <code>__typename</code> property.</p>
<p>It is also possible to return a list of IDs:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-clike">cacheRedirects: {
  Query: {
    books: (_, args) =&gt; args.ids.map(id =&gt;
      toIdValue(cache.config.dataIdFromObject({ __typename: &#39;Book&#39;, id: id }))),
  },
},
</code></pre>
<h2 id="prefetching">Prefetching data</h2>

<p>Prefetching is one of the easiest ways to make your application’s UI feel a lot faster with Apollo Client. Prefetching simply means loading data into the cache before it needs to be rendered on the screen. Essentially, we want to load all data required for a view as soon as we can guess that a user will navigate to it.</p>
<p>We can accomplish this in only a few lines of code by calling <code>client.query</code> whenever the user hovers over a link. Let’s see this in action in the <code>Feed</code> component in our example app <a href="https://codesandbox.io/s/r5qp83z0yq" target="_blank" rel="noopener">Pupstagram</a>.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-jsx">const Feed = () =&gt; (
  &lt;View style={styles.container}&gt;
    &lt;Header &#x2F;&gt;
    &lt;Query query={GET_DOGS}&gt;
      {({ loading, error, data, client }) =&gt; {
        if (loading) return &lt;Fetching &#x2F;&gt;;
        if (error) return &lt;Error &#x2F;&gt;;

        return (
          &lt;DogList
            data={data.dogs}
            renderRow={(type, data) =&gt; (
              &lt;Link
                to={{
                  pathname: `&#x2F;${data.breed}&#x2F;${data.id}`,
                  state: { id: data.id }
                }}
                onMouseOver={() =&gt;
                  client.query({
                    query: GET_DOG,
                    variables: { breed: data.breed }
                  })
                }
                style={{ textDecoration: &quot;none&quot; }}
              &gt;
                &lt;Dog {...data} url={data.displayImage} &#x2F;&gt;
              &lt;&#x2F;Link&gt;
            )}
          &#x2F;&gt;
        );
      }}
    &lt;&#x2F;Query&gt;
  &lt;&#x2F;View&gt;
);
</code></pre>
<p>All we have to do is access the client in the render prop function and call <code>client.query</code> when the user hovers over the link. Once the user clicks on the link, the data will already be available in the Apollo cache, so the user won’t see a loading state.</p>
<p>There are a lot of different ways to anticipate that the user will end up needing some data in the UI. In addition to using the hover state, here are some other places you can preload data:</p>
<ol>
<li>The next step of a multi-step wizard immediately</li>
<li>The route of a call-to-action button</li>
<li>All of the data for a sub-area of the application, to make navigating within that area instant</li>
</ol>
<p>If you have some other ideas, please send a PR to this article, and maybe add some more code snippets. A special form of prefetching is <a href="./server-side-rendering.html#store-rehydration">store hydration from the server</a>, so you might also consider hydrating more data than is actually needed for the first page load to make other interactions faster.</p>
<h2 id="query-splitting">Query splitting</h2>

<p>Prefetching is an easy way to make your applications UI feel faster. You can use mouse events to predict the data that could be needed.
This is powerful and works perfectly on the browser, but can not be applied to a mobile device.</p>
<p>One solution for improving the UI experience would be the usage of fragments to preload more data in a query, but loading huge amounts of data (that you probably never show to the user) is expensive.</p>
<p>Another solution would be to split huge queries into two smaller queries:</p>
<ul>
<li>The first one could load data which is already in the store. This means that it can be displayed instantly.</li>
<li>The second query could load data which is not in the store yet and must be fetched from the server first.</li>
</ul>
<p>This solution gives you the benefit of not fetching too much data, as well as the possibility to show some part of the views data before the server responds.</p>
<p>Lets say you have the following schema:

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-graphql">type Series {
  id: Int!
  title: String!
  description: String!
  episodes: [Episode]!
  cover: String!
}

type Episode {
  id: Int!
  title: String!
  cover: String!
}

type Query {
  series: [Series!]!
  oneSeries(id: Int): Series
}
</code></pre></p>
<p>And you have two Views:</p>
<ol>
<li>Series Overview: List of all Series with their description and cover</li>
<li>Series DetailView: Detail View of a Series with its description, cover and a list of episodes</li>
</ol>
<p>The query for the Series Overview would look like the following:

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-graphql">query SeriesOverviewData {
  series {
    id
    title
    description
    cover
  }
}
</code></pre></p>
<p>The queries for the Series DetailView would look like this:

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-graphql">query SeriesDetailData($seriesId: Int!) {
  oneSeries(id: $seriesId) {
    id
    title
    description
    cover
  }
}
</code></pre></p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-graphql">query SeriesEpisodes($seriesId: Int!) {
  oneSeries(id: $seriesId) {
    id
    episodes {
      id
      title
      cover
    }
  }
}
</code></pre>
<p>By adding a <a href="../advanced/caching.html#cacheRedirect">custom resolver</a> for the <code>oneSeries</code> field (and having dataIdFromObject function which normalizes the cache), the data can be resolved instantly from the store without a server round trip.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-javascript">import { ApolloClient } from &#39;apollo-client&#39;;
import { toIdValue } from &#39;apollo-utilities&#39;;
import { InMemoryCache } from &#39;apollo-cache-inmemory&#39;;

const cache = new InMemoryCache({
  cacheResolvers: {
    Query: {
      oneSeries: (_, { id }) =&gt; toIdValue(cache.config.dataIdFromObject({ __typename: &#39;Series&#39;, id })),
    },
  },
  dataIdFromObject,
})

const client = new ApolloClient({
  link, &#x2F;&#x2F; your link,
  cache,
})
</code></pre>
<p>A component for the second view that implements the two queries could look like this:

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-jsx">const QUERY_SERIES_DETAIL_VIEW = gql`
  query SeriesDetailData($seriesId: Int!) {
    oneSeries(id: $seriesId) {
      id
      title
      description
      cover
    }
  }
`;

const QUERY_SERIES_EPISODES = gql`
  query SeriesEpisodes($seriesId: Int!) {
    oneSeries(id: $seriesId) {
      id
      episodes {
        id
        title
        cover
      }
    }
  }
`;

const SeriesDetailView = ({ seriesId }) =&gt; (
  &lt;Query query={QUERY_SERIES_DETAIL_VIEW} variables={{ seriesId }}&gt;
    {({ loading: seriesLoading, data: { oneSeries } }) =&gt; (
      &lt;Query query={QUERY_SERIES_EPISODES} variables={{ seriesId }}&gt;
        {({
          loading: episodesLoading,
          data: { oneSeries: { episodes } = {} }
        }) =&gt; (
          &lt;div&gt;
            &lt;h1&gt;{seriesLoading ? `Loading...` : oneSeries.title}&lt;&#x2F;h1&gt;
            &lt;img src={seriesLoading ? `&#x2F;dummy.jpg` : oneSeries.cover} &#x2F;&gt;
            &lt;h2&gt;Episodes&lt;&#x2F;h2&gt;
            &lt;ul&gt;
              {episodesLoading ? (
                &lt;li&gt;Loading...&lt;&#x2F;li&gt;
              ) : (
                episodes.map(episode =&gt; (
                  &lt;li key={episode.id}&gt;
                    &lt;img src={episode.cover} &#x2F;&gt;
                    &lt;a href={`&#x2F;episode&#x2F;${episode.id}`}&gt;{episode.title}&lt;&#x2F;a&gt;
                  &lt;&#x2F;li&gt;
                ))
              )}
            &lt;&#x2F;ul&gt;
          &lt;&#x2F;div&gt;
        )}
      &lt;&#x2F;Query&gt;
    )}
  &lt;&#x2F;Query&gt;
);
</code></pre></p>
<p>Unfortunately if the user would now visit the second view without ever visiting the first view this would result in two network requests (since the data for the first query is not in the store yet). By using a <a href="/docs/link/links/batch-http.html"><code>BatchedHttpLink</code></a> those two queries can be send to the server in one network request.</p>

        </div>
      </div>

      <div class="pagination">
        <div class="content-wrapper">
          
          
         
              <a class="link primary prev" href="static-typing.html">
                <span class="icon-arrow-left-alt"></span>
                <span class="subtitle-pagination">Previous</span>
                Using Apollo with TypeScript
              </a>
         
          
          
           
              <a class="link primary next" href="react-native.html">
                <span class="subtitle-pagination">Next</span>
                Integrating with React Native
                  <span class="icon-arrow-right-alt"></span>
              </a>
           
          
        </div>
      </div>

      <div class="github">
        <a class="link tertiary " href="https://github.com/apollographql/apollo-client/tree/master/docs/source/recipes/performance.md" target="_blank">
          <span class="icon-github"></span>Edit on GitHub</a>
      </div>

      
    </div>

    
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/prism.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/combine/npm/prismjs@1.15.0/components/prism-bash.min.js,npm/prismjs@1.15.0/components/prism-graphql.min.js,npm/prismjs@1.15.0/components/prism-json.min.js,npm/prismjs@1.15.0/components/prism-jsx.min.js,npm/prismjs@1.15.0/components/prism-less.min.js,npm/prismjs@1.15.0/components/prism-swift.min.js,npm/prismjs@1.15.0/components/prism-typescript.min.js,npm/prismjs@1.15.0/components/prism-yaml.min.js"></script>

    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/smooth-scroll@12.1.5/dist/js/smooth-scroll.min.js"></script>

    <script>
      // Used by the main.js script below.
      docsConfigRoot = '/docs/react/';
    </script>
    <script src="../script/main.js"></script>

    
      <script type="text/javascript" src="//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();
    </script>

    

    
      <script>
        
        var analytics;

        <!-- Segment.io -->
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
        analytics.load("wgrIo8Bul0Ujl8USETG3DB6hONdy4kTg");
        analytics.page();
        }}();
      </script>
    

    // search box
    
      <script>
        ['desktop'].forEach(function(type) {
          var search = docsearch({
            apiKey: '768e823959d35bbd51e4b2439be13fb7',
            
            
            indexName: 'apollodata',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      </script>
    

    
      <script>
        var REDIRECTS = {
  "/docs/react/essentials/get-started.html#api": "docs/react/api/react-apollo.html",
  "/docs/react/essentials/queries.html#api": "docs/react/api/react-apollo.html#graphql-query-options",
  "/docs/react/basics/mutations.html#api": "docs/react/api/react-apollo.html#graphql-mutation-options",
  "/docs/react/recipes/simple-example.html": "docs/react/essentials/get-started.html",
  "/docs/react/api/apollo-client.html#FetchPolicy": "docs/react/api/react-apollo.html#graphql-config-options-fetchPolicy",
  "/docs/react/api/apollo-client.html#ErrorPolicy": "docs/react/api/react-apollo.html#graphql-config-options-errorPolicy",
  "/docs/react/features/performance.html": "/docs/react/recipes/performance.html"
};

        function redirect() {
          // Support redirects of the form /path#hash
          var locationKey = location.pathname + location.hash;
          if (REDIRECTS[locationKey]) {
            location.replace(location.origin + '/' + REDIRECTS[locationKey]);
          }

          // Support redirects of the form #hash (works for any path)
          var hashKey = location.hash;
          if (REDIRECTS[hashKey]) {
            location.replace(location.origin + '/' + REDIRECTS[hashKey]);
          }
        }

        // Redirect now
        redirect();

        // Redirect on hash change
        window.onhashchange = redirect;
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
      window.addEventListener('load', function () {
        window.cookieconsent.initialise({
          palette: {
            popup: {
              background: '#555',
            },
            button: {
              text: '#333',
              background: '#CCC',
            },
          },
        })
      });
    </script>
  </body>
</html>
